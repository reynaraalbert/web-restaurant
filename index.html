<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Waroeng Makan Cak Lie</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link
    href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=DM+Sans:wght@400;500;600&display=swap"
    rel="stylesheet">
  <style>
    :root {
      --bg: #fdf0f8;
      --white: #fff;
      --black: #3a2a3a;
      --dark: #c2477b;
      --mid: #a0547a;
      --muted: #b889a8;
      --light: #f4c6e0;
      --lighter: #fde8f4;
      --shadow: 0 4px 24px rgba(194, 71, 123, .10);
      --radius: 20px;
      --nav-h: 64px
    }

    *,
    *::before,
    *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0
    }

    html { scroll-behavior: smooth }

    body {
      font-family: 'DM Sans', sans-serif;
      background: var(--bg);
      color: var(--black);
      min-height: 100vh;
      background-image: radial-gradient(circle at 20% 20%, #fce4f3 0%, transparent 40%), radial-gradient(circle at 80% 80%, #dff0fb 0%, transparent 40%)
    }

    .page { display: none }
    .page.active { display: block }

    /* NAVBAR */
    .navbar {
      background: linear-gradient(135deg, #e8638d, #d44f7d);
      padding: 0 24px;
      height: var(--nav-h);
      display: flex;
      align-items: center;
      justify-content: space-between;
      position: sticky;
      top: 0;
      z-index: 100;
      box-shadow: 0 4px 20px rgba(212, 79, 125, .30);
      gap: 12px
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
      flex-shrink: 0;
      cursor: pointer;
      min-width: 0
    }
    .brand-icon { font-size: 1.8rem; flex-shrink: 0 }
    .brand-icon:hover { animation: wiggle .6s ease }
    .brand-name {
      font-family: 'Playfair Display', serif;
      color: #fff;
      font-size: 1.2rem;
      line-height: 1;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis
    }
    .brand-tagline { color: #fdd5ea; font-size: .68rem; margin-top: 2px; white-space: nowrap }

    .nav-right { display: flex; align-items: center; gap: 10px; flex-shrink: 0 }

    .search-bar {
      display: flex;
      align-items: center;
      background: rgba(255, 255, 255, .15);
      border-radius: 24px;
      padding: 7px 14px;
      gap: 8px
    }
    .search-bar input {
      background: none;
      border: none;
      outline: none;
      color: #fff;
      font-size: .88rem;
      width: 150px
    }
    .search-bar input::placeholder { color: rgba(255, 255, 255, .45) }

    .nav-btn {
      color: #fddaee;
      font-weight: 600;
      font-size: .88rem;
      white-space: nowrap;
      padding: 8px 12px;
      border-radius: 20px;
      background: none;
      border: none;
      cursor: pointer;
      font-family: 'DM Sans', sans-serif;
      transition: background .2s
    }
    .nav-btn:hover { background: rgba(255, 255, 255, .15); color: #fff }

    .cart-btn {
      background: #fff;
      color: #d44f7d;
      border: none;
      border-radius: 24px;
      padding: 8px 14px;
      font-weight: 700;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: .88rem;
      white-space: nowrap;
      transition: background .2s;
      flex-shrink: 0;
      font-family: 'DM Sans', sans-serif
    }
    .cart-btn:hover { background: #fde8f4 }

    .cart-badge {
      background: #f9a8c9;
      color: #fff;
      border-radius: 50%;
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: .72rem;
      font-weight: 700;
      flex-shrink: 0
    }
    .cart-badge.has-item { animation: pulseGlow 1.8s ease infinite }

    /* BURGER */
    .burger-btn {
      display: none;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      gap: 5px;
      width: 42px;
      height: 42px;
      min-width: 42px;
      background: rgba(255, 255, 255, .18);
      border: 2px solid rgba(255, 255, 255, .40);
      border-radius: 10px;
      cursor: pointer;
      padding: 8px;
      transition: background .2s;
      flex-shrink: 0
    }
    .burger-btn span {
      display: block;
      width: 100%;
      height: 2.5px;
      background: #fff;
      border-radius: 3px;
      transition: transform .35s cubic-bezier(.4, 0, .2, 1), opacity .25s;
      transform-origin: center
    }
    .burger-btn.open span:nth-child(1) { transform: translateY(7.5px) rotate(45deg) }
    .burger-btn.open span:nth-child(2) { opacity: 0; transform: scaleX(0) }
    .burger-btn.open span:nth-child(3) { transform: translateY(-7.5px) rotate(-45deg) }

    /* MOBILE OVERLAY + DRAWER */
    /* FIX: overlay harus display:block tapi opacity 0, bukan display:none */
    .mobile-overlay {
      position: fixed;
      inset: 0;
      background: rgba(60, 20, 50, .48);
      z-index: 200;
      backdrop-filter: blur(3px);
      opacity: 0;
      pointer-events: none;
      transition: opacity .3s
    }
    .mobile-overlay.show {
      opacity: 1;
      pointer-events: auto;
    }

    .mobile-drawer {
      position: fixed;
      top: 0;
      right: 0;
      width: 82%;
      max-width: 320px;
      height: 100%;
      background: linear-gradient(160deg, #fff0fb, #f0eeff);
      z-index: 201;
      padding: 24px 20px;
      display: flex;
      flex-direction: column;
      gap: 18px;
      transform: translateX(110%);
      transition: transform .38s cubic-bezier(.4, 0, .2, 1);
      box-shadow: -8px 0 40px rgba(180, 60, 120, .18);
      border-left: 2px solid #f4c6e0;
      overflow-y: auto
    }
    .mobile-drawer.open { transform: translateX(0) }

    .drawer-close {
      align-self: flex-end;
      background: #fde8f4;
      border: none;
      border-radius: 50%;
      width: 36px;
      height: 36px;
      font-size: 1rem;
      color: #c2477b;
      cursor: pointer;
      font-weight: 700;
      transition: background .2s, transform .2s
    }
    .drawer-close:hover { background: #f4c6e0; transform: rotate(90deg) }

    .drawer-brand {
      font-family: 'Playfair Display', serif;
      font-size: 1.25rem;
      color: #c2477b;
      font-weight: 700;
      border-bottom: 2px dashed #f4c6e0;
      padding-bottom: 16px
    }

    .drawer-nav { display: flex; flex-direction: column; gap: 6px }

    .drawer-link {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 12px 16px;
      border-radius: 14px;
      text-decoration: none;
      font-weight: 600;
      font-size: .95rem;
      color: #a0547a;
      cursor: pointer;
      background: none;
      border: none;
      font-family: 'DM Sans', sans-serif;
      transition: background .2s, color .2s, transform .15s;
      text-align: left;
      width: 100%
    }
    .drawer-link:hover { background: #fde8f4; color: #c2477b; transform: translateX(4px) }

    .drawer-info {
      margin-top: auto;
      padding: 14px;
      background: #fff;
      border-radius: 14px;
      border: 1.5px solid #f4c6e0;
      display: flex;
      flex-direction: column;
      gap: 6px
    }
    .drawer-info p { font-size: .82rem; color: #b889a8 }

    /* SHARED */
    .page-header {
      background: linear-gradient(135deg, #f48fb1, #ce7fc5);
      padding: 36px 24px;
      text-align: center
    }
    .page-header h2 { font-family: 'Playfair Display', serif; color: #fff; font-size: 2rem; margin-bottom: 6px }
    .page-header p { color: rgba(255, 255, 255, .85); font-size: .95rem }

    .container { max-width: 1100px; margin: 0 auto; padding: 32px 24px }

    .btn-back {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      color: #c2477b;
      background: none;
      border: 2px solid var(--light);
      border-radius: 12px;
      padding: 8px 16px;
      font-family: 'DM Sans', sans-serif;
      font-size: .88rem;
      font-weight: 700;
      cursor: pointer;
      transition: all .2s;
      margin-bottom: 20px
    }
    .btn-back:hover { background: var(--lighter); border-color: #e8638d }

    /* HERO */
    .hero {
      background: linear-gradient(135deg, #f48fb1 0%, #ce7fc5 40%, #90caf9 100%);
      padding: 64px 32px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 32px;
      min-height: 300px;
      position: relative;
      overflow: hidden
    }
    .hero::before {
      content: '';
      position: absolute;
      inset: 0;
      background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23ffffff' fill-opacity='0.15'%3E%3Ccircle cx='30' cy='30' r='3'/%3E%3C/g%3E%3C/svg%3E");
      pointer-events: none
    }
    .hero-text { max-width: 520px; animation: fadeUp .9s cubic-bezier(.22, 1, .36, 1) both }
    .hero-text h2 { font-family: 'Playfair Display', serif; font-size: 2.6rem; color: #fff; line-height: 1.2; margin-bottom: 14px }
    .hero-text h2 em { color: #fff0f8; font-style: italic }
    .hero-text p { color: rgba(255, 255, 255, .88); font-size: 1rem; margin-bottom: 26px }

    .btn-hero {
      background: #fff;
      color: #d44f7d;
      padding: 12px 28px;
      border-radius: 32px;
      border: none;
      font-weight: 700;
      font-size: .95rem;
      cursor: pointer;
      font-family: 'DM Sans', sans-serif;
      transition: transform .2s, box-shadow .2s
    }
    .btn-hero:hover { transform: translateY(-2px); box-shadow: 0 8px 24px rgba(255, 255, 255, .35) }

    .food-circle {
      width: 190px;
      height: 190px;
      background: rgba(255, 255, 255, .25);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 6.5rem;
      border: 3px solid rgba(255, 255, 255, .5);
      animation: float 3s ease-in-out infinite;
      flex-shrink: 0
    }

    /* STICKY TABS */
    .sticky-cats {
      position: sticky;
      top: var(--nav-h);
      z-index: 90;
      background: rgba(253, 240, 248, .95);
      backdrop-filter: blur(8px);
      border-bottom: 2px solid var(--light);
      padding: 10px 24px;
      display: flex;
      gap: 8px;
      overflow-x: auto;
      scrollbar-width: none;
      -webkit-overflow-scrolling: touch
    }
    .sticky-cats::-webkit-scrollbar { display: none }

    .sticky-cat-btn {
      background: #fff;
      border: 2px solid #f4c6e0;
      border-radius: 24px;
      padding: 7px 16px;
      font-family: 'DM Sans', sans-serif;
      font-size: .85rem;
      font-weight: 600;
      cursor: pointer;
      color: #b86090;
      white-space: nowrap;
      flex-shrink: 0;
      transition: all .2s
    }
    .sticky-cat-btn:hover,
    .sticky-cat-btn.active {
      background: linear-gradient(135deg, #e8638d, #c46ec0);
      border-color: transparent;
      color: #fff;
      box-shadow: 0 4px 14px rgba(220, 80, 140, .25)
    }

    /* CAT SECTIONS */
    .cat-section { padding: 52px 0 20px; scroll-margin-top: calc(var(--nav-h) + 56px) }

    .cat-section-header {
      display: flex;
      align-items: flex-start;
      gap: 16px;
      margin-bottom: 8px;
      padding-bottom: 20px;
      border-bottom: 2px dashed var(--light)
    }
    .cat-section-icon {
      font-size: 2.8rem;
      background: linear-gradient(135deg, #fce4f3, #dbeeff);
      width: 64px;
      height: 64px;
      min-width: 64px;
      border-radius: 18px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 16px rgba(194, 71, 123, .12)
    }
    .cat-section-meta { flex: 1; min-width: 0 }
    .cat-section-title { font-family: 'Playfair Display', serif; font-size: 1.75rem; color: #c2477b; margin-bottom: 4px }
    .cat-section-desc { font-size: .88rem; color: var(--muted); line-height: 1.5; margin-bottom: 10px }
    .cat-section-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: var(--lighter);
      border: 1.5px solid var(--light);
      border-radius: 20px;
      padding: 4px 12px;
      font-size: .78rem;
      font-weight: 600;
      color: var(--mid)
    }
    .cat-search-bar {
      margin-top: 10px;
      display: flex;
      align-items: center;
      background: #fff;
      border: 2px solid var(--light);
      border-radius: 24px;
      padding: 8px 16px;
      gap: 8px;
      max-width: 360px;
      transition: border-color .2s
    }
    .cat-search-bar:focus-within { border-color: #e8638d; box-shadow: 0 0 0 3px rgba(232, 99, 141, .10) }
    .cat-search-bar input { flex: 1; border: none; outline: none; background: none; font-family: 'DM Sans', sans-serif; font-size: .88rem; color: var(--black) }
    .cat-search-bar input::placeholder { color: var(--muted) }

    .cat-empty { text-align: center; padding: 40px 20px; color: var(--muted); font-size: .95rem; display: none }
    .cat-empty span { font-size: 2.5rem; display: block; margin-bottom: 8px }

    .section-divider { height: 1px; background: linear-gradient(90deg, transparent, var(--light), transparent); margin: 8px 0 }

    /* MENU GRID */
    .menu-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 20px; padding-top: 20px }

    .menu-card {
      background: #fff;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      border: 1px solid var(--lighter);
      overflow: hidden;
      transition: transform .25s, box-shadow .25s;
      animation: fadeUp .5s ease both
    }
    .menu-card:hover { transform: translateY(-6px); box-shadow: 0 12px 40px rgba(0, 0, 0, .13) }

    .card-emoji { background: linear-gradient(135deg, #fce4f3, #dbeeff); text-align: center; font-size: 4rem; padding: 28px 0 20px; line-height: 1 }
    .card-body { padding: 16px 18px 18px }
    .card-name { font-family: 'Playfair Display', serif; font-size: 1.05rem; font-weight: 700; margin-bottom: 6px }
    .card-desc { font-size: .82rem; color: var(--muted); margin-bottom: 14px; line-height: 1.5 }
    .card-footer { display: flex; align-items: center; justify-content: space-between }
    .card-price { font-size: 1.05rem; font-weight: 700; color: #c2477b }

    .btn-add {
      background: linear-gradient(135deg, #e8638d, #c46ec0);
      color: #fff;
      border: none;
      border-radius: 20px;
      padding: 7px 16px;
      font-weight: 600;
      font-size: .85rem;
      cursor: pointer;
      font-family: 'DM Sans', sans-serif;
      transition: opacity .2s, transform .15s
    }
    .btn-add:hover { opacity: .88; transform: scale(1.05) }
    .badge-habis { background: #f9e8f3; color: #c8a0bc; border-radius: 20px; padding: 6px 14px; font-size: .8rem; font-weight: 600 }

    /* CART PAGE */
    .cart-layout { display: grid; grid-template-columns: 1fr 380px; gap: 28px; align-items: start }
    .cart-items { display: flex; flex-direction: column; gap: 14px }

    .empty-cart { text-align: center; padding: 60px 20px; color: var(--muted) }
    .empty-cart .ei { font-size: 4rem; display: block; margin-bottom: 16px }
    .empty-cart h3 { font-family: 'Playfair Display', serif; color: #c2477b; margin-bottom: 8px }
    .empty-cart button { color: #c2477b; background: none; border: none; font-weight: 700; cursor: pointer; font-family: 'DM Sans', sans-serif; font-size: 1rem }

    .cart-item {
      background: #fff;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      border: 1px solid var(--lighter);
      display: flex;
      align-items: center;
      gap: 14px;
      padding: 14px 18px;
      animation: fadeUp .4s ease both
    }
    .item-emoji { font-size: 2.4rem; width: 52px; text-align: center; flex-shrink: 0 }
    .item-info { flex: 1; min-width: 0 }
    .item-name { font-weight: 700; font-size: 1rem; margin-bottom: 4px }
    .item-price { color: #c2477b; font-weight: 600; font-size: .9rem }

    .qty-control { display: flex; align-items: center; gap: 10px }
    .qty-btn {
      width: 30px; height: 30px;
      border-radius: 50%;
      border: 2px solid #e8638d;
      background: none;
      color: #e8638d;
      font-size: 1.1rem;
      font-weight: 700;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      transition: all .15s
    }
    .qty-btn:hover { background: linear-gradient(135deg, #e8638d, #c46ec0); border-color: transparent; color: #fff }
    .qty-num { font-weight: 700; font-size: 1rem; min-width: 20px; text-align: center }
    .btn-hapus { background: none; border: none; color: #ccc; cursor: pointer; font-size: 1.2rem; padding: 4px; flex-shrink: 0; transition: color .2s }
    .btn-hapus:hover { color: #e8638d }

    .cart-summary {
      background: #fff;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      border: 1px solid var(--lighter);
      padding: 24px;
      position: sticky;
      top: calc(var(--nav-h) + 16px)
    }
    .summary-title { font-family: 'Playfair Display', serif; font-size: 1.3rem; margin-bottom: 18px; color: #c2477b }
    .summary-row { display: flex; justify-content: space-between; margin-bottom: 10px; font-size: .92rem; color: var(--muted) }
    .summary-row.total { border-top: 2px solid var(--lighter); padding-top: 12px; margin-top: 8px; font-size: 1.1rem; font-weight: 700; color: var(--dark) }

    .order-form { margin-top: 22px; display: flex; flex-direction: column; gap: 12px }
    .form-label { font-size: .8rem; font-weight: 700; color: var(--mid); margin-bottom: 3px; display: block }
    .form-input, .form-textarea {
      width: 100%;
      padding: 10px 14px;
      border: 2px solid var(--light);
      border-radius: 12px;
      font-family: 'DM Sans', sans-serif;
      font-size: .9rem;
      outline: none;
      background: var(--bg);
      color: var(--dark);
      transition: border-color .2s
    }
    .form-input:focus, .form-textarea:focus { border-color: #e8638d; box-shadow: 0 0 0 3px rgba(232, 99, 141, .12) }
    .form-textarea { resize: vertical; min-height: 68px }
    .form-group { display: flex; flex-direction: column }

    .method-toggle { display: flex; gap: 8px; margin-top: 4px }
    .method-btn {
      flex: 1;
      padding: 9px 6px;
      border: 2px solid var(--light);
      border-radius: 12px;
      background: #fff;
      font-family: 'DM Sans', sans-serif;
      font-size: .82rem;
      font-weight: 600;
      cursor: pointer;
      color: var(--mid);
      text-align: center;
      transition: all .2s
    }
    .method-btn.active { background: linear-gradient(135deg, #e8638d, #c46ec0); border-color: transparent; color: #fff }

    .btn-goto-payment {
      background: linear-gradient(135deg, #e8638d, #c46ec0);
      color: #fff;
      border: none;
      border-radius: 14px;
      padding: 14px;
      font-size: 1rem;
      font-weight: 700;
      cursor: pointer;
      width: 100%;
      font-family: 'DM Sans', sans-serif;
      transition: opacity .2s, transform .15s;
      margin-top: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      box-shadow: 0 6px 20px rgba(232, 99, 141, .25)
    }
    .btn-goto-payment:hover { opacity: .92; transform: translateY(-1px) }
    .btn-goto-payment:disabled { opacity: .45; cursor: not-allowed; transform: none }

    /* ORDERS PAGE */
    .new-banner {
      background: linear-gradient(135deg, #25d366, #128c7e);
      color: #fff;
      border-radius: 16px;
      padding: 16px 20px;
      margin-bottom: 24px;
      display: flex;
      align-items: center;
      gap: 14px;
      animation: fadeUp .5s ease both
    }
    .new-banner .nb-icon { font-size: 2rem; flex-shrink: 0 }
    .new-banner h3 { font-size: 1rem; font-weight: 700; margin-bottom: 2px }
    .new-banner p { font-size: .85rem; opacity: .9 }

    .tabs { display: flex; gap: 4px; margin-bottom: 24px; border-bottom: 2px solid var(--light); overflow-x: auto; scrollbar-width: none }
    .tabs::-webkit-scrollbar { display: none }

    .tab-btn {
      padding: 10px 14px;
      background: none;
      border: none;
      border-radius: 12px 12px 0 0;
      font-family: 'DM Sans', sans-serif;
      font-size: .88rem;
      font-weight: 600;
      cursor: pointer;
      color: var(--muted);
      border-bottom: 3px solid transparent;
      margin-bottom: -2px;
      white-space: nowrap;
      transition: all .2s
    }
    .tab-btn:hover { color: #c2477b; background: var(--lighter) }
    .tab-btn.active { color: #c2477b; border-bottom-color: #e8638d; background: var(--lighter) }

    .tab-count { background: var(--light); color: var(--dark); border-radius: 10px; padding: 1px 7px; font-size: .75rem; margin-left: 4px }
    .tab-btn.active .tab-count { background: #e8638d; color: #fff }

    .order-list { display: flex; flex-direction: column; gap: 16px }

    .order-card {
      background: #fff;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      border: 1px solid var(--lighter);
      overflow: hidden;
      animation: fadeUp .45s ease both
    }
    .order-card-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 16px 20px;
      border-bottom: 1px solid var(--lighter);
      flex-wrap: wrap;
      gap: 10px
    }
    .order-id { font-weight: 700; font-size: .95rem }
    .order-time { font-size: .78rem; color: var(--muted); margin-top: 2px }

    .status-badge { padding: 5px 14px; border-radius: 20px; font-size: .8rem; font-weight: 700; white-space: nowrap }
    .status-proses { background: #fff3cd; color: #856404 }
    .status-selesai { background: #d1f5e0; color: #0b6e33 }
    .status-batal { background: #fde8e8; color: #b22 }
    .status-confirmed { background: #e8f5e9; color: #2e7d32 }

    .order-card-body { padding: 16px 20px }
    .order-meta { display: flex; flex-wrap: wrap; gap: 8px 20px; margin-bottom: 14px }
    .order-meta span { font-size: .84rem; color: var(--muted) }
    .order-meta b { color: var(--black) }

    .order-items-list { display: flex; flex-direction: column; gap: 6px; margin-bottom: 14px }
    .order-item-row { display: flex; align-items: center; justify-content: space-between; font-size: .88rem }
    .order-total-row { display: flex; justify-content: space-between; padding-top: 10px; border-top: 2px dashed var(--light); font-weight: 700; font-size: .98rem; color: #c2477b }

    .order-actions { padding: 14px 20px; background: var(--lighter); display: flex; gap: 8px; flex-wrap: wrap }

    .btn-invoice {
      background: linear-gradient(135deg, #e8638d, #c46ec0);
      color: #fff;
      border: none;
      border-radius: 12px;
      padding: 9px 18px;
      font-family: 'DM Sans', sans-serif;
      font-size: .85rem;
      font-weight: 700;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      transition: opacity .2s
    }
    .btn-invoice:hover { opacity: .88 }

    .btn-konfirmasi {
      background: linear-gradient(135deg, #25d366, #128c7e);
      color: #fff;
      border: none;
      border-radius: 12px;
      padding: 8px 16px;
      font-size: .82rem;
      font-weight: 700;
      cursor: pointer;
      font-family: 'DM Sans', sans-serif;
      transition: opacity .2s, transform .1s;
      display: inline-flex;
      align-items: center;
      gap: 5px
    }
    .btn-konfirmasi:hover { opacity: .88; transform: scale(1.03) }

    .btn-confirmed-tag {
      background: #d1f5e0;
      color: #0b6e33;
      border: none;
      border-radius: 12px;
      padding: 8px 16px;
      font-size: .82rem;
      font-weight: 700;
      cursor: default;
      font-family: 'DM Sans', sans-serif
    }

    .empty-state { text-align: center; padding: 60px 20px; color: var(--muted) }
    .empty-state .ei { font-size: 3.5rem; display: block; margin-bottom: 14px }
    .empty-state h3 { font-family: 'Playfair Display', serif; color: #c2477b; margin-bottom: 8px }
    .empty-state button { color: #c2477b; background: none; border: none; font-weight: 700; cursor: pointer; font-family: 'DM Sans', sans-serif; font-size: .95rem }

    /* CONFIRM PAGE */
    .confirm-wrap { max-width: 560px; margin: 0 auto; padding: 32px 24px 60px }
    .confirm-card { background: #fff; border-radius: var(--radius); box-shadow: 0 8px 40px rgba(194, 71, 123, .14); border: 1px solid var(--lighter); overflow: hidden; animation: fadeUp .5s ease both }
    .confirm-header { background: linear-gradient(135deg, #25d366, #128c7e); padding: 32px 28px; text-align: center }
    .confirm-check { font-size: 4rem; display: block; margin-bottom: 10px }
    .confirm-header h2 { font-family: 'Playfair Display', serif; color: #fff; font-size: 1.5rem; margin-bottom: 6px }
    .confirm-header p { color: rgba(255, 255, 255, .85); font-size: .9rem }
    .confirm-body { padding: 24px 28px }
    .confirm-order-id { text-align: center; font-size: .8rem; color: var(--muted); margin-bottom: 16px; font-weight: 600 }
    .confirm-question { background: linear-gradient(135deg, #fff8e1, #fffde7); border: 2px solid #ffe082; border-radius: 14px; padding: 16px 20px; margin-bottom: 20px; text-align: center }
    .confirm-question h3 { font-family: 'Playfair Display', serif; font-size: 1.15rem; color: #856404; margin-bottom: 6px }
    .confirm-question p { font-size: .85rem; color: #a07800; line-height: 1.5 }
    .confirm-items { background: var(--bg); border-radius: 12px; padding: 14px 16px; margin-bottom: 20px; border: 1.5px solid var(--light) }
    .confirm-items h4 { font-size: .72rem; font-weight: 700; color: var(--muted); text-transform: uppercase; letter-spacing: .5px; margin-bottom: 10px }
    .confirm-item-row { display: flex; justify-content: space-between; font-size: .88rem; padding: 5px 0; border-bottom: 1px dashed var(--lighter) }
    .confirm-item-row:last-child { border-bottom: none; font-weight: 700; color: #c2477b; font-size: .95rem; padding-top: 8px }
    .confirm-actions { display: flex; flex-direction: column; gap: 10px }

    .btn-yes-received {
      background: linear-gradient(135deg, #25d366, #128c7e);
      color: #fff;
      border: none;
      border-radius: 14px;
      padding: 15px;
      font-size: 1rem;
      font-weight: 700;
      cursor: pointer;
      width: 100%;
      font-family: 'DM Sans', sans-serif;
      transition: opacity .2s, transform .15s;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px
    }
    .btn-yes-received:hover { opacity: .92; transform: translateY(-1px) }

    .btn-problem {
      background: #fff;
      color: #e8638d;
      border: 2px solid #f4c6e0;
      border-radius: 14px;
      padding: 12px;
      font-size: .9rem;
      font-weight: 700;
      cursor: pointer;
      width: 100%;
      font-family: 'DM Sans', sans-serif;
      transition: all .2s;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px
    }
    .btn-problem:hover { border-color: #e8638d; background: var(--lighter) }

    /* INVOICE */
    .invoice-wrap { max-width: 700px; margin: 0 auto; padding: 24px 24px 60px }
    .invoice { background: #fff; border-radius: 24px; box-shadow: 0 8px 40px rgba(194, 71, 123, .12); border: 1px solid var(--lighter); overflow: hidden; animation: fadeUp .5s ease both }
    .inv-header { background: linear-gradient(135deg, #e8638d, #c46ec0); padding: 32px 36px; position: relative; overflow: hidden }
    .inv-brand { display: flex; align-items: center; gap: 12px; margin-bottom: 20px }
    .inv-brand-icon { font-size: 2.4rem }
    .inv-brand-name { font-family: 'Playfair Display', serif; color: #fff; font-size: 1.5rem; line-height: 1 }
    .inv-brand-sub { color: rgba(255, 255, 255, .8); font-size: .78rem; margin-top: 3px }
    .inv-title-row { display: flex; align-items: flex-end; justify-content: space-between; flex-wrap: wrap; gap: 10px }
    .inv-title { font-size: 2rem; font-weight: 900; color: #fff; font-family: 'Playfair Display', serif }
    .inv-id { font-size: .88rem; color: rgba(255, 255, 255, .85); font-weight: 700; text-align: right }
    .inv-date { font-size: .78rem; color: rgba(255, 255, 255, .7); margin-top: 2px }
    .inv-status-strip { padding: 12px 36px; display: flex; align-items: center; justify-content: space-between; border-bottom: 1px solid var(--lighter); flex-wrap: wrap; gap: 8px }
    .inv-status { padding: 5px 16px; border-radius: 20px; font-size: .82rem; font-weight: 700 }
    .st-proses { background: #fff3cd; color: #856404 }
    .st-selesai { background: #d1f5e0; color: #0b6e33 }
    .st-batal { background: #fde8e8; color: #b22 }
    .st-confirmed { background: #e8f5e9; color: #2e7d32 }
    .inv-metode { font-size: .85rem; color: var(--muted); font-weight: 600 }
    .inv-body { padding: 28px 36px }
    .inv-info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 28px; padding-bottom: 20px; border-bottom: 2px dashed var(--light) }
    .inv-info-block h4 { font-size: .72rem; font-weight: 700; color: var(--muted); text-transform: uppercase; letter-spacing: .5px; margin-bottom: 6px }
    .inv-info-block p { font-size: .9rem; font-weight: 600; color: var(--black); line-height: 1.5 }
    .inv-info-block p.muted { font-weight: 400; color: var(--muted); font-size: .82rem }
    .inv-table-label { font-size: .72rem; font-weight: 700; color: var(--muted); text-transform: uppercase; letter-spacing: .5px; margin-bottom: 12px }
    .inv-table { width: 100%; border-collapse: collapse; margin-bottom: 20px }
    .inv-table thead tr { border-bottom: 2px solid var(--light) }
    .inv-table thead th { padding: 8px 0; font-size: .78rem; font-weight: 700; color: var(--mid); text-transform: uppercase; letter-spacing: .4px; text-align: left }
    .inv-table thead th:last-child { text-align: right }
    .inv-table thead th:nth-child(2), .inv-table thead th:nth-child(3) { text-align: center }
    .inv-table tbody tr { border-bottom: 1px solid var(--lighter) }
    .inv-table tbody td { padding: 11px 0; font-size: .9rem; vertical-align: middle }
    .inv-table tbody td:nth-child(2), .inv-table tbody td:nth-child(3) { text-align: center; color: var(--muted) }
    .inv-table tbody td:last-child { text-align: right; font-weight: 700; color: #c2477b }
    .item-name-cell { display: flex; align-items: center; gap: 8px }
    .item-cell-emoji { font-size: 1.3rem }
    .inv-totals { padding: 16px 0 0; border-top: 2px solid var(--light) }
    .inv-total-row { display: flex; justify-content: space-between; padding: 5px 0; font-size: .9rem; color: var(--muted) }
    .inv-total-row.grand { border-top: 2px dashed var(--light); padding-top: 12px; margin-top: 8px; font-size: 1.1rem; font-weight: 900; color: #c2477b }
    .inv-note { background: var(--lighter); border-radius: 12px; padding: 14px 16px; margin-top: 20px; border-left: 3px solid #e8638d }
    .inv-note p { font-size: .84rem; color: var(--mid); line-height: 1.6 }
    .inv-footer-block { background: linear-gradient(135deg, var(--lighter), #eef0ff); padding: 20px 36px; text-align: center; border-top: 1px solid var(--lighter) }
    .inv-footer-block p { font-size: .82rem; color: var(--muted); margin-bottom: 4px }
    .inv-thank { font-family: 'Playfair Display', serif; font-size: 1.1rem; color: #c2477b; margin-bottom: 8px }
    .inv-contact { display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; margin-top: 12px }
    .inv-contact span { font-size: .8rem; color: var(--mid); font-weight: 600 }
    .invoice-actions { display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; align-items: center }
    .btn-print { background: #fff; color: #d44f7d; border: 2px solid var(--light); border-radius: 12px; padding: 9px 16px; font-family: 'DM Sans', sans-serif; font-size: .88rem; font-weight: 700; cursor: pointer; display: inline-flex; align-items: center; gap: 6px; transition: all .2s }
    .btn-print:hover { background: #fde8f4; border-color: #e8638d }
    .btn-wa-share { background: linear-gradient(135deg, #25d366, #128c7e); color: #fff; border: none; border-radius: 12px; padding: 9px 16px; font-family: 'DM Sans', sans-serif; font-size: .88rem; font-weight: 700; cursor: pointer; display: inline-flex; align-items: center; gap: 6px; transition: opacity .2s }
    .btn-wa-share:hover { opacity: .88 }

    /* FOOTER */
    .footer { background: linear-gradient(135deg, #c2477b, #a040a0); color: #fce4f3; padding: 40px 32px 20px; margin-top: 60px }
    .footer-inner { display: flex; gap: 48px; flex-wrap: wrap; max-width: 1100px; margin: 0 auto 28px }
    .footer-inner h3, .footer-inner h4 { font-family: 'Playfair Display', serif; color: #fff; margin-bottom: 10px }
    .footer-inner p { font-size: .88rem; margin-bottom: 6px; line-height: 1.5 }
    .footer-copy { text-align: center; font-size: .8rem; color: rgba(255, 255, 255, .55); border-top: 1px solid rgba(255, 255, 255, .15); padding-top: 20px; max-width: 1100px; margin: 0 auto }

    /* TOAST */
    .toast {
      position: fixed;
      bottom: 24px;
      right: 24px;
      background: linear-gradient(135deg, #e8638d, #c46ec0);
      color: #fff;
      padding: 12px 20px;
      border-radius: 12px;
      font-weight: 600;
      font-size: .9rem;
      opacity: 0;
      transform: translateY(16px);
      transition: all .3s;
      pointer-events: none;
      z-index: 999;
      box-shadow: 0 4px 20px rgba(220, 80, 140, .3);
      max-width: calc(100vw - 48px)
    }
    .toast.show { opacity: 1; transform: translateY(0) }

    /* KEYFRAMES */
    @keyframes fadeUp { from { opacity: 0; transform: translateY(24px) } to { opacity: 1; transform: translateY(0) } }
    @keyframes float { 0%, 100% { transform: translateY(0) } 50% { transform: translateY(-12px) } }
    @keyframes wiggle { 0%, 100% { transform: rotate(0) } 20% { transform: rotate(-12deg) } 40% { transform: rotate(12deg) } 60% { transform: rotate(-8deg) } 80% { transform: rotate(8deg) } }
    @keyframes pulseGlow { 0%, 100% { box-shadow: 0 0 0 0 rgba(249, 168, 201, .6) } 50% { box-shadow: 0 0 0 7px rgba(249, 168, 201, 0) } }
    @keyframes bounceIn { 0% { transform: scale(.7); opacity: 0 } 60% { transform: scale(1.08) } 100% { transform: scale(1); opacity: 1 } }
    @keyframes bubbleFloat { 0% { transform: translateY(0) scale(1); opacity: .6 } 50% { transform: translateY(-30px) scale(1.1); opacity: 1 } 100% { transform: translateY(0) scale(1); opacity: .6 } }

    /* RESPONSIVE */
    @media(max-width:900px) {
      .cart-layout { grid-template-columns: 1fr }
      .cart-summary { position: static }
      .menu-grid { grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)) }
    }

    @media(max-width:640px) {
      .navbar { padding: 0 16px; gap: 10px }
      .burger-btn { display: flex }
      .search-bar { display: none }
      .cart-btn { display: none }
      .nav-btn.hide-m { display: none }
      .brand-name { font-size: 1.05rem }
      .brand-tagline { font-size: .62rem }
      .hero { flex-direction: column; text-align: center; padding: 44px 20px 36px; gap: 24px }
      .hero-text h2 { font-size: 1.85rem }
      .food-circle { display: none }
      .sticky-cats { padding: 8px 16px }
      .container { padding: 20px 16px }
      .cat-section { padding: 36px 0 16px }
      .cat-section-title { font-size: 1.4rem }
      .cat-section-icon { width: 52px; height: 52px; min-width: 52px; font-size: 2.2rem; border-radius: 14px }
      .cat-search-bar { max-width: 100% }
      .menu-grid { grid-template-columns: 1fr; gap: 14px }
      .cart-layout { grid-template-columns: 1fr }
      .cart-summary { position: static }
      .inv-header { padding: 24px 20px }
      .inv-body { padding: 20px 20px }
      .inv-status-strip { padding: 10px 20px }
      .inv-footer-block { padding: 18px 20px }
      .inv-info-grid { grid-template-columns: 1fr; gap: 14px }
      .inv-title { font-size: 1.5rem }
      .invoice-wrap { padding: 16px 14px 40px }
      .footer-inner { flex-direction: column; gap: 24px }
      .footer { padding: 32px 16px 16px }
      .toast { bottom: 16px; right: 16px; left: 16px; text-align: center; max-width: none }
    }

    @media(max-width:380px) {
      .navbar { padding: 0 12px; gap: 8px }
      .brand-name { font-size: .95rem }
      .brand-tagline { display: none }
    }

    @media print {
      body { background: #fff !important; background-image: none !important }
      .navbar, .invoice-actions, .btn-back, .footer, .toast, .sticky-cats { display: none !important }
      .invoice-wrap { padding: 0; margin: 0 }
      .invoice { border-radius: 0; box-shadow: none; border: none }
      .inv-header, .inv-footer-block { -webkit-print-color-adjust: exact; print-color-adjust: exact }
      #page-invoice { display: block !important }
    }
  </style>
</head>

<body>

  <!-- NAVBAR -->
  <nav class="navbar">
    <div class="brand" onclick="goTo('menu')">
      <span class="brand-icon">🍛</span>
      <div class="brand-text">
        <div class="brand-name">Waroeng Makan Cak Lie</div>
        <div class="brand-tagline">Masakan Rumahan Sejak 2005</div>
      </div>
    </div>
    <div class="nav-right">
      <div class="search-bar"><input id="searchInput" type="text" placeholder="Cari menu..." /><span>🔍</span></div>
      <button class="nav-btn hide-m" onclick="goTo('orders')">📋 Pesanan</button>
      <button class="cart-btn" onclick="goTo('cart')">🛒 Keranjang <span class="cart-badge" id="cartBadge">0</span></button>
      <button class="burger-btn" id="burgerBtn"><span></span><span></span><span></span></button>
    </div>
  </nav>

  <!-- FIX: overlay selalu ada di DOM, dikontrol lewat class show -->
  <div class="mobile-overlay" id="mobileOverlay"></div>
  <div class="mobile-drawer" id="mobileDrawer">
    <button class="drawer-close" id="drawerClose">✕</button>
    <div class="drawer-brand">🍛 Waroeng Makan Cak Lie</div>
    <nav class="drawer-nav">
      <button class="drawer-link" onclick="nav('menu')">🏠 Beranda</button>
      <button class="drawer-link" onclick="nav('cart')">🛒 Keranjang <span class="cart-badge" id="cartBadgeMobile" style="margin-left:4px">0</span></button>
      <button class="drawer-link" onclick="nav('orders')">📋 Pesanan Saya</button>
      <button class="drawer-link" onclick="navScroll('sec-nasi')">🍚 Nasi</button>
      <button class="drawer-link" onclick="navScroll('sec-lauk')">🍗 Lauk-Pauk</button>
      <button class="drawer-link" onclick="navScroll('sec-paket')">🎁 Paket Hemat</button>
      <button class="drawer-link" onclick="navScroll('sec-minuman')">🥤 Minuman</button>
    </nav>
    <div class="drawer-info">
      <p>📍 Jl. Kh. Hasyim No. 14B, Kembangan Utara, Jakarta Barat</p>
      <p>📞 0882-1306-6069</p>
      <p>🕐 Senin–Sabtu: 06.00–21.00 | Minggu: Libur</p>
    </div>
  </div>

  <!-- PAGE: MENU -->
  <div class="page active" id="page-menu">
    <section class="hero">
      <div class="hero-text">
        <h2>Rasakan Kehangatan<br /><em>Masakan Rumahan</em></h2>
        <p>Diolah dengan bumbu pilihan &amp; cinta, diantar hangat ke pintu rumahmu.</p>
        <button class="btn-hero" onclick="document.getElementById('sec-nasi').scrollIntoView({behavior:'smooth'})">Lihat Menu ↓</button>
      </div>
      <div class="hero-visual">
        <div class="food-circle">🍲</div>
      </div>
    </section>

    <div class="sticky-cats" id="stickyCats">
      <button class="sticky-cat-btn active" data-target="sec-nasi">🍚 Nasi</button>
      <button class="sticky-cat-btn" data-target="sec-lauk">🍗 Lauk-Pauk</button>
      <button class="sticky-cat-btn" data-target="sec-sayur">🥬 Sayur</button>
      <button class="sticky-cat-btn" data-target="sec-paket">🎁 Paket Hemat</button>
      <button class="sticky-cat-btn" data-target="sec-minuman">🥤 Minuman</button>
      <button class="sticky-cat-btn" data-target="sec-camilan">🍘 Camilan</button>
    </div>

    <div class="container" style="padding-bottom:0">
      <div class="cat-section" id="sec-nasi">
        <div class="cat-section-header">
          <div class="cat-section-icon">🍚</div>
          <div class="cat-section-meta">
            <h2 class="cat-section-title">Nasi</h2>
            <p class="cat-section-desc">Pilihan nasi unggulan — dimasak segar setiap hari tanpa bahan pengawet.</p>
            <span class="cat-section-badge">🌾 Dimasak Segar Tiap Hari</span>
            <div class="cat-search-bar"><span>🔍</span><input type="text" placeholder="Cari di Nasi..." data-section="sec-nasi" /></div>
          </div>
        </div>
        <div class="menu-grid" id="grid-nasi"></div>
        <div class="cat-empty" id="empty-nasi"><span>🍚</span>Menu tidak ditemukan</div>
      </div>
      <div class="section-divider"></div>
      <div class="cat-section" id="sec-lauk">
        <div class="cat-section-header">
          <div class="cat-section-icon">🍗</div>
          <div class="cat-section-meta">
            <h2 class="cat-section-title">Lauk-Pauk</h2>
            <p class="cat-section-desc">Aneka lauk khas rumahan — bumbu tradisional kaya rempah.</p>
            <span class="cat-section-badge">🌶️ Bumbu Rempah Pilihan</span>
            <div class="cat-search-bar"><span>🔍</span><input type="text" placeholder="Cari di Lauk..." data-section="sec-lauk" /></div>
          </div>
        </div>
        <div class="menu-grid" id="grid-lauk"></div>
        <div class="cat-empty" id="empty-lauk"><span>🍗</span>Menu tidak ditemukan</div>
      </div>
      <div class="section-divider"></div>
      <div class="cat-section" id="sec-sayur">
        <div class="cat-section-header">
          <div class="cat-section-icon">🥬</div>
          <div class="cat-section-meta">
            <h2 class="cat-section-title">Sayur</h2>
            <p class="cat-section-desc">Sayuran segar pilihan dari pasar pagi setiap harinya.</p>
            <span class="cat-section-badge">🌿 Bahan Segar dari Pasar Pagi</span>
            <div class="cat-search-bar"><span>🔍</span><input type="text" placeholder="Cari di Sayur..." data-section="sec-sayur" /></div>
          </div>
        </div>
        <div class="menu-grid" id="grid-sayur"></div>
        <div class="cat-empty" id="empty-sayur"><span>🥬</span>Menu tidak ditemukan</div>
      </div>
      <div class="section-divider"></div>
      <div class="cat-section" id="sec-paket">
        <div class="cat-section-header">
          <div class="cat-section-icon">🎁</div>
          <div class="cat-section-meta">
            <h2 class="cat-section-title">Paket Hemat</h2>
            <p class="cat-section-desc">Hemat hingga 30% dibanding beli terpisah. Tersedia paket harian, keluarga &amp; catering.</p>
            <span class="cat-section-badge">💰 Hemat s/d 30% · Best Seller</span>
            <div class="cat-search-bar"><span>🔍</span><input type="text" placeholder="Cari di Paket..." data-section="sec-paket" /></div>
          </div>
        </div>
        <div class="menu-grid" id="grid-paket"></div>
        <div class="cat-empty" id="empty-paket"><span>🎁</span>Menu tidak ditemukan</div>
      </div>
      <div class="section-divider"></div>
      <div class="cat-section" id="sec-minuman">
        <div class="cat-section-header">
          <div class="cat-section-icon">🥤</div>
          <div class="cat-section-meta">
            <h2 class="cat-section-title">Minuman</h2>
            <p class="cat-section-desc">Minuman segar menemani makan Anda. Tersedia pilihan dingin dan hangat.</p>
            <span class="cat-section-badge">🧊 Tersedia Dingin &amp; Hangat</span>
            <div class="cat-search-bar"><span>🔍</span><input type="text" placeholder="Cari di Minuman..." data-section="sec-minuman" /></div>
          </div>
        </div>
        <div class="menu-grid" id="grid-minuman"></div>
        <div class="cat-empty" id="empty-minuman"><span>🥤</span>Menu tidak ditemukan</div>
      </div>
      <div class="section-divider"></div>
      <div class="cat-section" id="sec-camilan">
        <div class="cat-section-header">
          <div class="cat-section-icon">🍘</div>
          <div class="cat-section-meta">
            <h2 class="cat-section-title">Camilan</h2>
            <p class="cat-section-desc">Aneka gorengan &amp; jajanan pasar renyah gurih. Digoreng fresh setiap jam.</p>
            <span class="cat-section-badge">🔥 Digoreng Fresh Tiap Jam</span>
            <div class="cat-search-bar"><span>🔍</span><input type="text" placeholder="Cari di Camilan..." data-section="sec-camilan" /></div>
          </div>
        </div>
        <div class="menu-grid" id="grid-camilan"></div>
        <div class="cat-empty" id="empty-camilan"><span>🍘</span>Menu tidak ditemukan</div>
      </div>
    </div>

    <footer class="footer">
      <div class="footer-inner">
        <div>
          <h3>🍛 Waroeng Makan Cak Lie</h3>
          <p>Jl. Kh. Hasyim No. 14B, Kembangan Utara, Jakarta Barat</p>
          <p>📞 0882-1306-6069</p>
        </div>
        <div>
          <h4>Jam Buka</h4>
          <p>Senin – Sabtu: 06.00 – 21.00</p>
          <p>Minggu: Tutup</p>
        </div>
        <div>
          <h4>Layanan</h4>
          <p>✅ Dine-in</p>
          <p>✅ Take-away</p>
          <p>✅ Delivery (GoFood / GrabFood)</p>
        </div>
      </div>
      <p class="footer-copy">© 2026 Waroeng Makan Cak Lie. Semua hak dilindungi.</p>
    </footer>
  </div>

  <!-- PAGE: CART -->
  <div class="page" id="page-cart">
    <div class="page-header">
      <h2>🛒 Keranjang Belanja</h2>
      <p>Periksa pesananmu sebelum konfirmasi via WhatsApp</p>
    </div>
    <div class="container">
      <button class="btn-back" onclick="goTo('menu')">← Kembali ke Menu</button>
      <div class="cart-layout">
        <div class="cart-items" id="cartItems"></div>
        <div class="cart-summary">
          <div class="summary-title">📝 Ringkasan Pesanan</div>
          <div id="summaryRows"></div>
          <div class="summary-row total"><span>Total</span><span id="totalPrice">Rp 0</span></div>
          <div class="order-form">
            <div class="form-group">
              <label class="form-label">Nama Pemesan *</label>
              <input class="form-input" id="fNama" type="text" placeholder="Contoh: Budi Santoso" />
            </div>
            <div class="form-group">
              <label class="form-label">Nomor HP / WhatsApp *</label>
              <input class="form-input" id="fHp" type="tel" placeholder="08xx-xxxx-xxxx" />
            </div>
            <div class="form-group">
              <label class="form-label">Metode Pengambilan</label>
              <div class="method-toggle">
                <button class="method-btn active" data-m="Dine-in">🍽️ Dine-in</button>
                <button class="method-btn" data-m="Take-away">🥡 Take-away</button>
                <button class="method-btn" data-m="Delivery">🛵 Delivery</button>
              </div>
            </div>
            <div class="form-group" id="alamatGroup" style="display:none">
              <label class="form-label">Alamat Pengiriman *</label>
              <textarea class="form-textarea" id="fAlamat" placeholder="Jl. ... No. ... RT/RW ..."></textarea>
            </div>
            <div class="form-group">
              <label class="form-label">Catatan (opsional)</label>
              <textarea class="form-textarea" id="fCatatan" placeholder="Contoh: tidak pedas, tanpa bawang..."></textarea>
            </div>
            <button class="btn-goto-payment" id="btnOrder" onclick="goToPayment()">
              💳 Lanjut ke Pembayaran <span style="font-size:1.1rem">›</span>
            </button>
            <button class="btn-back" style="margin-bottom:0;margin-top:4px;width:100%;justify-content:center" onclick="clearCart()">🗑️ Kosongkan Keranjang</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- PAGE: ORDERS -->
  <div class="page" id="page-orders">
    <div class="page-header">
      <h2>📋 Pesanan Saya</h2>
      <p>Lacak status pesananmu di sini</p>
    </div>
    <div class="container" style="max-width:900px">
      <button class="btn-back" onclick="goTo('menu')">← Kembali ke Menu</button>
      <div id="newBanner"></div>
      <div class="tabs">
        <button class="tab-btn active" data-tab="semua" onclick="switchTab('semua')">Semua <span class="tab-count" id="cnt-semua">0</span></button>
        <button class="tab-btn" data-tab="proses" onclick="switchTab('proses')">⏳ Diproses <span class="tab-count" id="cnt-proses">0</span></button>
        <button class="tab-btn" data-tab="selesai" onclick="switchTab('selesai')">✅ Selesai <span class="tab-count" id="cnt-selesai">0</span></button>
        <button class="tab-btn" data-tab="batal" onclick="switchTab('batal')">❌ Batal <span class="tab-count" id="cnt-batal">0</span></button>
        <button class="tab-btn" data-tab="confirmed" onclick="switchTab('confirmed')">🎉 Terkonfirmasi <span class="tab-count" id="cnt-confirmed">0</span></button>
      </div>
      <div class="order-list" id="orderList"></div>
    </div>
  </div>

  <!-- PAGE: CONFIRM -->
  <div class="page" id="page-confirm">
    <div class="page-header">
      <h2>✅ Konfirmasi Penerimaan</h2>
      <p>Beritahu kami apakah pesananmu sudah sampai</p>
    </div>
    <div class="confirm-wrap">
      <button class="btn-back" onclick="goTo('orders')">← Kembali ke Pesanan</button>
      <div class="confirm-card">
        <div class="confirm-header">
          <span class="confirm-check">✅</span>
          <h2>Pesanan Sudah Selesai?</h2>
          <p>Admin telah menandai pesananmu sebagai selesai. Apakah kamu sudah menerima pesanan dengan baik?</p>
        </div>
        <div class="confirm-body">
          <div class="confirm-order-id" id="confirmOrderId">No. Order: —</div>
          <div class="confirm-question">
            <h3>🤔 Apakah pesanan sudah selesai?</h3>
            <p>Konfirmasi ini membantu kami memastikan kamu puas dengan layanan Waroeng Makan Cak Lie.</p>
          </div>
          <div class="confirm-items" id="confirmItems"></div>
          <div class="confirm-actions">
            <button class="btn-yes-received" onclick="konfirmasiTerima()">✅ Ya, Pesanan Sudah Saya Terima dengan Baik!</button>
            <button class="btn-problem" onclick="laporMasalah()">❌ Belum — Ada Masalah dengan Pesanan Saya</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- PAGE: INVOICE -->
  <div class="page" id="page-invoice">
    <div class="invoice-wrap">
      <div class="invoice-actions">
        <button class="btn-back" style="margin-bottom:0" onclick="goTo('orders')">← Pesanan</button>
        <button class="btn-print" onclick="window.print()">🖨️ Cetak / PDF</button>
        <button class="btn-wa-share" onclick="shareInvoiceWa()">💬 Kirim ke WA</button>
      </div>
      <div id="invoiceContent"></div>
    </div>
  </div>

  <div class="toast" id="toast"></div>

  <script>
    /* ════ ROUTER ════ */
    let _page = 'menu'
    let _confirmOrderId = null

    function goTo(page, opts = {}) {
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'))
      document.getElementById('page-' + page).classList.add('active')
      _page = page
      window.scrollTo(0, 0)
      if (page === 'cart') renderCart()
      if (page === 'orders') renderOrders(opts.newId)
      if (page === 'invoice') renderInvoice(opts.id)
      if (page === 'confirm') renderConfirm(opts.id)
    }

    function nav(p) { closeDrawer(); goTo(p) }

    function navScroll(id) {
      closeDrawer()
      if (_page !== 'menu') {
        goTo('menu')
        setTimeout(() => document.getElementById(id)?.scrollIntoView({ behavior: 'smooth' }), 350)
      } else {
        document.getElementById(id)?.scrollIntoView({ behavior: 'smooth' })
      }
    }

    /* ════ DATA MENU ════ */
    const MENU = {
      nasi: [
        { id: 'n1', name: 'Nasi Putih', emoji: '🍚', desc: 'Nasi putih pulen, dimasak dengan air sumur alami.', price: 3000, stok: true },
        { id: 'n2', name: 'Nasi Kuning', emoji: '🌕', desc: 'Nasi kuning khas, harum kunyit & santan, gurih lezat.', price: 5000, stok: true },
        { id: 'n3', name: 'Nasi Uduk', emoji: '🥣', desc: 'Nasi uduk Betawi, dimasak dengan santan & daun pandan.', price: 6000, stok: true },
        { id: 'n4', name: 'Nasi Goreng', emoji: '🍳', desc: 'Nasi goreng bumbu merah spesial, tersedia telur & ayam.', price: 12000, stok: true },
        { id: 'n5', name: 'Nasi Tim Ayam', emoji: '🍲', desc: 'Nasi lembut dikukus bersama ayam cincang & kaldu.', price: 14000, stok: false },
      ],
      lauk: [
        { id: 'l1', name: 'Ayam Goreng', emoji: '🍗', desc: 'Ayam goreng rempah, garing di luar, juicy di dalam.', price: 10000, stok: true },
        { id: 'l2', name: 'Ayam Bakar', emoji: '🔥', desc: 'Ayam bakar bumbu kecap manis & rempah pilihan.', price: 12000, stok: true },
        { id: 'l3', name: 'Ikan Goreng', emoji: '🐟', desc: 'Ikan kembung segar, digoreng kering bumbu kunyit.', price: 8000, stok: true },
        { id: 'l4', name: 'Tempe Orek', emoji: '🟫', desc: 'Tempe orek kering manis pedas, tahan hingga 2 hari.', price: 5000, stok: true },
        { id: 'l5', name: 'Tahu Goreng', emoji: '🟡', desc: 'Tahu pong goreng, crispy luar lembut dalam.', price: 3000, stok: true },
        { id: 'l6', name: 'Telur Balado', emoji: '🥚', desc: 'Telur rebus dimasak bumbu balado merah pedas.', price: 5000, stok: true },
        { id: 'l7', name: 'Rendang Daging', emoji: '🥩', desc: 'Rendang sapi empuk, dimasak lama dengan santan & rempah.', price: 20000, stok: false },
        { id: 'l8', name: 'Sambal Goreng', emoji: '🌶️', desc: 'Campuran kentang, hati, & udang dalam balutan sambal.', price: 8000, stok: true },
      ],
      sayur: [
        { id: 's1', name: 'Sayur Lodeh', emoji: '🥦', desc: 'Sayuran mix dimasak santan tipis, kuah gurih segar.', price: 5000, stok: true },
        { id: 's2', name: 'Tumis Kangkung', emoji: '🥬', desc: 'Kangkung segar ditumis bawang putih & terasi pedas.', price: 5000, stok: true },
        { id: 's3', name: 'Capcay', emoji: '🫑', desc: 'Capcay kuah bening, penuh sayuran segar bergizi.', price: 7000, stok: true },
        { id: 's4', name: 'Urap-Urap', emoji: '🌿', desc: 'Sayur rebus dengan parutan kelapa berbumbu kencur.', price: 6000, stok: false },
        { id: 's5', name: 'Gudeg Jogja', emoji: '🫙', desc: 'Nangka muda dimasak santan kental, manis gurih khas Jogja.', price: 8000, stok: true },
      ],
      paket: [
        { id: 'p1', name: 'Paket Nasi + 1 Lauk', emoji: '🎁', desc: 'Nasi putih + 1 lauk pilihan. Ekonomis untuk makan siang.', price: 13000, stok: true },
        { id: 'p2', name: 'Paket Nasi + 2 Lauk + Sayur', emoji: '🍱', desc: 'Nasi + 2 lauk + 1 sayur + es teh. Lengkap & kenyang!', price: 22000, stok: true },
        { id: 'p3', name: 'Paket Keluarga (4 Porsi)', emoji: '👨‍👩‍👧‍👦', desc: '4x nasi + 4x lauk + 2 sayur + 4 minuman. Cocok keluarga.', price: 75000, stok: true },
        { id: 'p4', name: 'Paket Catering (10 Box)', emoji: '📦', desc: '10 box makan siang, nasi + 2 lauk + sayur. Min. pesan H-1.', price: 170000, stok: true },
        { id: 'p5', name: 'Paket Sarapan', emoji: '🌅', desc: 'Nasi uduk + lauk + teh hangat. Tersedia mulai 06.00.', price: 12000, stok: false },
      ],
      minuman: [
        { id: 'm1', name: 'Es Teh Manis', emoji: '🧋', desc: 'Teh tubruk asli seduh, disajikan dengan es batu besar.', price: 3000, stok: true },
        { id: 'm2', name: 'Teh Hangat', emoji: '☕', desc: 'Teh hangat manis, cocok untuk pagi & sore.', price: 2000, stok: true },
        { id: 'm3', name: 'Es Jeruk', emoji: '🍊', desc: 'Jeruk peras segar, manis-segar menyegarkan.', price: 5000, stok: true },
        { id: 'm4', name: 'Es Campur', emoji: '🍨', desc: 'Minuman segar cincau, kolang-kaling & sirup rose.', price: 7000, stok: true },
        { id: 'm5', name: 'Jus Alpukat', emoji: '🥑', desc: 'Jus alpukat kental tanpa air, full susu & madu.', price: 10000, stok: false },
        { id: 'm6', name: 'Air Putih', emoji: '💧', desc: 'Air minum kemasan, tersedia botol 330ml & 600ml.', price: 3000, stok: true },
      ],
      camilan: [
        { id: 'c1', name: 'Gorengan Mix', emoji: '🧆', desc: 'Bakwan, risol, pisang goreng — 5 pcs per porsi, fresh!', price: 5000, stok: true },
        { id: 'c2', name: 'Tempe Mendoan', emoji: '🫓', desc: 'Tempe tipis lebar dibalut tepung tipis, renyah & gurih.', price: 4000, stok: true },
        { id: 'c3', name: 'Pisang Goreng', emoji: '🍌', desc: 'Pisang kepok goreng crispy, bisa request topping.', price: 5000, stok: true },
        { id: 'c4', name: 'Ubi Goreng', emoji: '🟠', desc: 'Ubi cilembu manis, digoreng hingga kecokelatan sempurna.', price: 4000, stok: true },
        { id: 'c5', name: 'Kerupuk', emoji: '🥨', desc: 'Kerupuk udang & kerupuk putih, gratis untuk pelanggan dine-in.', price: 2000, stok: true },
      ],
    }

    /* ════ HELPERS ════ */
    const getCart = () => { try { return JSON.parse(localStorage.getItem('cart') || '[]') } catch { return [] } }
    const saveCart = c => localStorage.setItem('cart', JSON.stringify(c))
    const getOrders = () => { try { return JSON.parse(localStorage.getItem('orders') || '[]') } catch { return [] } }
    const saveOrders = o => localStorage.setItem('orders', JSON.stringify(o))
    const fRp = n => 'Rp ' + n.toLocaleString('id-ID')
    const genId = () => 'ORD-' + Date.now().toString(36).toUpperCase()
    const nowStr = () => new Date().toLocaleString('id-ID', { day: '2-digit', month: 'short', year: 'numeric', hour: '2-digit', minute: '2-digit' })

    function toast(msg) {
      const t = document.getElementById('toast')
      t.textContent = msg
      t.classList.add('show')
      setTimeout(() => t.classList.remove('show'), 2500)
    }

    const getMenuOv = () => { try { return JSON.parse(localStorage.getItem('menuOverrides') || '{}') } catch { return {} } }

    function updateBadge() {
      const n = getCart().reduce((s, i) => s + i.qty, 0)
      document.querySelectorAll('#cartBadge, #cartBadgeMobile').forEach(b => {
        b.textContent = n
        b.classList.toggle('has-item', n > 0)
      })
    }

    function addToCart(item) {
      const cart = getCart()
      const idx = cart.findIndex(c => c.id === item.id)
      if (idx > -1) cart[idx].qty++
      else cart.push({ ...item, qty: 1 })
      saveCart(cart)
      updateBadge()
      toast('✅ ' + item.name + ' ditambahkan ke keranjang!')
    }

    /* ════ RENDER MENU ════ */
    function renderMenuAll() {
      const ov = getMenuOv()
      Object.entries(MENU).forEach(([cat, items]) => {
        const grid = document.getElementById('grid-' + cat)
        if (!grid) return
        grid.innerHTML = ''
        items.forEach((item, i) => {
          const ovItem = ov[item.id] || {}
          const stok = ovItem.stok !== undefined ? ovItem.stok : item.stok
          const price = ovItem.harga !== undefined ? ovItem.harga : item.price
          const liveItem = { ...item, stok, price }

          const d = document.createElement('div')
          d.className = 'menu-card'
          d.style.animationDelay = (i * 0.07) + 's'
          d.dataset.name = item.name.toLowerCase()
          d.dataset.desc = item.desc.toLowerCase()
          d.innerHTML =
            '<div class="card-emoji">' + item.emoji + '</div>' +
            '<div class="card-body">' +
            '<div class="card-name">' + item.name + '</div>' +
            '<div class="card-desc">' + item.desc + '</div>' +
            '<div class="card-footer">' +
            '<span class="card-price">' + fRp(price) + '</span>' +
            (stok
              ? '<button class="btn-add">+ Keranjang</button>'
              : '<span class="badge-habis">🚫 Habis</span>') +
            '</div></div>'
          if (stok) d.querySelector('.btn-add').onclick = () => addToCart(liveItem)
          grid.appendChild(d)
        })
      })
    }

    /* ════ SEARCH ════ */
    function filterCat(cat, q) {
      const grid = document.getElementById('grid-' + cat)
      const empty = document.getElementById('empty-' + cat)
      if (!grid) return
      let vis = 0
      grid.querySelectorAll('.menu-card').forEach(c => {
        const m = !q || c.dataset.name.includes(q) || c.dataset.desc.includes(q)
        c.style.display = m ? '' : 'none'
        if (m) vis++
      })
      empty.style.display = vis === 0 ? 'block' : 'none'
    }

    function initSearch() {
      document.querySelectorAll('.cat-search-bar input').forEach(inp => {
        const cat = inp.dataset.section.replace('sec-', '')
        inp.addEventListener('input', () => filterCat(cat, inp.value.trim().toLowerCase()))
      })
      document.getElementById('searchInput').addEventListener('input', e => {
        const q = e.target.value.trim().toLowerCase()
        Object.keys(MENU).forEach(cat => filterCat(cat, q))
        document.querySelectorAll('.cat-search-bar input').forEach(i => i.value = q)
      })
    }

    /* ════ STICKY CAT NAV ════ */
    function initStickyNav() {
      const btns = document.querySelectorAll('.sticky-cat-btn')
      const navH = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--nav-h')) || 64
      const sH = document.getElementById('stickyCats')?.offsetHeight || 48
      const off = navH + sH + 8
      btns.forEach(b => b.addEventListener('click', () => {
        const sec = document.getElementById(b.dataset.target)
        if (sec) window.scrollTo({ top: sec.getBoundingClientRect().top + window.scrollY - off, behavior: 'smooth' })
      }))
      const obs = new IntersectionObserver(entries => {
        entries.forEach(e => {
          if (e.isIntersecting) {
            const id = e.target.id
            btns.forEach(b => b.classList.toggle('active', b.dataset.target === id))
          }
        })
      }, { rootMargin: '-' + off + 'px 0px -60% 0px' })
      document.querySelectorAll('.cat-section').forEach(s => obs.observe(s))
    }

    /* ════ CART ════ */
    let _method = 'Dine-in'

    function renderCart() {
      const cart = getCart()
      const itemsEl = document.getElementById('cartItems')
      const rowsEl = document.getElementById('summaryRows')
      const totalEl = document.getElementById('totalPrice')
      const btn = document.getElementById('btnOrder')

      if (!cart.length) {
        itemsEl.innerHTML = '<div class="empty-cart"><span class="ei">🛒</span><h3>Keranjang masih kosong</h3><p style="margin:8px 0 16px;font-size:.9rem;color:#b889a8">Yuk pilih menu dulu!</p><button onclick="goTo(\'menu\')">← Kembali ke Menu</button></div>'
        rowsEl.innerHTML = ''
        totalEl.textContent = 'Rp 0'
        btn.disabled = true
        return
      }

      btn.disabled = false
      itemsEl.innerHTML = ''
      rowsEl.innerHTML = ''
      let total = 0

      cart.forEach((item, i) => {
        const sub = item.price * item.qty
        total += sub
        const d = document.createElement('div')
        d.className = 'cart-item'
        d.style.animationDelay = (i * .07) + 's'
        d.innerHTML =
          '<div class="item-emoji">' + item.emoji + '</div>' +
          '<div class="item-info"><div class="item-name">' + item.name + '</div><div class="item-price">' + fRp(item.price) + ' x ' + item.qty + ' = <b>' + fRp(sub) + '</b></div></div>' +
          '<div class="qty-control"><button class="qty-btn" onclick="cQty(\'' + item.id + '\',-1)">-</button><span class="qty-num">' + item.qty + '</span><button class="qty-btn" onclick="cQty(\'' + item.id + '\',1)">+</button></div>' +
          '<button class="btn-hapus" onclick="cDel(\'' + item.id + '\')">🗑</button>'
        itemsEl.appendChild(d)

        const r = document.createElement('div')
        r.className = 'summary-row'
        r.innerHTML = '<span>' + item.name + ' x' + item.qty + '</span><span>' + fRp(sub) + '</span>'
        rowsEl.appendChild(r)
      })
      totalEl.textContent = fRp(total)
    }

    function cQty(id, d) {
      let c = getCart()
      const i = c.findIndex(x => x.id === id)
      if (i < 0) return
      c[i].qty += d
      if (c[i].qty <= 0) c.splice(i, 1)
      saveCart(c)
      updateBadge()
      renderCart()
    }

    function cDel(id) {
      saveCart(getCart().filter(x => x.id !== id))
      updateBadge()
      renderCart()
    }

    function goToPayment() {
      const cart = getCart()
      if (!cart.length) { alert('Keranjang kosong!'); return }
      const nama = document.getElementById('fNama').value.trim()
      const hp = document.getElementById('fHp').value.trim()
      const alamat = document.getElementById('fAlamat').value.trim()
      const catatan = document.getElementById('fCatatan').value.trim()
      if (!nama) { alert('Nama pemesan harus diisi!'); return }
      if (!hp) { alert('Nomor HP harus diisi!'); return }
      if (_method === 'Delivery' && !alamat) { alert('Alamat pengiriman harus diisi!'); return }
      sessionStorage.setItem('pendingOrder', JSON.stringify({ nama, hp, metode: _method, alamat, catatan, cart }))
      window.location.href = 'payment.html'
    }

    function clearCart() {
      if (confirm('Kosongkan keranjang?')) { saveCart([]); updateBadge(); renderCart() }
    }

    function initMethodToggle() {
      document.querySelectorAll('.method-btn').forEach(b => {
        b.addEventListener('click', () => {
          document.querySelectorAll('.method-btn').forEach(x => x.classList.remove('active'))
          b.classList.add('active')
          _method = b.dataset.m
          document.getElementById('alamatGroup').style.display = _method === 'Delivery' ? 'flex' : 'none'
        })
      })
    }

    /* ════ ORDERS ════ */
    let _tab = 'semua'

    function switchTab(tab) {
      _tab = tab
      document.querySelectorAll('.tab-btn').forEach(b => b.classList.toggle('active', b.dataset.tab === tab))
      renderOrders()
    }

    /* FIX: satu fungsi renderOrders yang benar & lengkap */
    function renderOrders(newId) {
      const orders = getOrders()

      // Update semua tab count
      document.getElementById('cnt-semua').textContent = orders.length
      document.getElementById('cnt-proses').textContent = orders.filter(o => o.status === 'proses').length
      document.getElementById('cnt-selesai').textContent = orders.filter(o => o.status === 'selesai').length
      document.getElementById('cnt-batal').textContent = orders.filter(o => o.status === 'batal').length
      const confirmedEl = document.getElementById('cnt-confirmed')
      if (confirmedEl) confirmedEl.textContent = orders.filter(o => o.status === 'confirmed').length

      // Banner pesanan baru
      const banner = document.getElementById('newBanner')
      if (newId) {
        banner.innerHTML = '<div class="new-banner"><span class="nb-icon">🎉</span><div><h3>Pesanan berhasil dikirim ke WhatsApp!</h3><p>No. Order: <b>' + newId + '</b> — Tunggu konfirmasi kami ya!</p></div></div>'
        setTimeout(() => { if (banner) banner.innerHTML = '' }, 7000)
      } else if (banner) {
        banner.innerHTML = ''
      }

      // Filter berdasarkan tab aktif
      const list = _tab === 'semua' ? orders : orders.filter(o => o.status === _tab)
      const el = document.getElementById('orderList')

      if (!list.length) {
        const lbl = {
          semua: 'Belum ada pesanan',
          proses: 'Tidak ada pesanan yang sedang diproses',
          selesai: 'Belum ada pesanan selesai',
          batal: 'Tidak ada pesanan yang dibatalkan',
          confirmed: 'Belum ada pesanan yang dikonfirmasi'
        }
        el.innerHTML = '<div class="empty-state"><span class="ei">' +
          (_tab === 'selesai' ? '✅' : _tab === 'confirmed' ? '🎉' : _tab === 'batal' ? '❌' : '📋') +
          '</span><h3>' + (lbl[_tab] || 'Belum ada pesanan') + '</h3><button onclick="goTo(\'menu\')">← Lihat Menu</button></div>'
        return
      }

      el.innerHTML = ''

      // FIX: Deklarasi sLbl yang benar, di dalam fungsi
      const sLbl = {
        proses: '⏳ Sedang Diproses',
        selesai: '✅ Selesai',
        batal: '❌ Dibatalkan',
        confirmed: '🎉 Diterima'
      }

      list.forEach((order, i) => {
        const card = document.createElement('div')
        card.className = 'order-card'
        card.style.animationDelay = (i * .08) + 's'

        const mIcon = order.metode === 'Delivery' ? '🛵' : order.metode === 'Take-away' ? '🥡' : '🍽️'
        const pIcon = (order.payment || '').includes('Tunai') ? '💵'
          : (order.payment || '').includes('Transfer') ? '🏦'
          : (order.payment || '').includes('QRIS') ? '📱' : '🚪'

        // FIX: stClass dan stLbl dideklarasikan dengan benar
        const stClass = order.status === 'confirmed' ? 'status-confirmed' : 'status-' + order.status
        const stLbl = sLbl[order.status] || order.status

        let acts = ''
        if (order.status === 'selesai') {
          acts = '<button class="btn-konfirmasi" onclick="goTo(\'confirm\',{id:\'' + order.id + '\'})">✅ Konfirmasi Terima Pesanan</button>'
        } else if (order.status === 'confirmed') {
          acts = '<span class="btn-confirmed-tag">🎉 Sudah Dikonfirmasi</span>'
        }

        card.innerHTML =
          '<div class="order-card-header">' +
          '<div><div class="order-id">📋 ' + order.id + '</div><div class="order-time">⏰ ' + order.waktu + '</div></div>' +
          '<span class="status-badge ' + stClass + '">' + stLbl + '</span>' +
          '</div>' +
          '<div class="order-card-body">' +
          '<div class="order-meta">' +
          '<span>👤 <b>' + order.nama + '</b></span>' +
          '<span>📞 <b>' + order.hp + '</b></span>' +
          '<span>' + mIcon + ' <b>' + order.metode + '</b></span>' +
          (order.payment ? '<span>' + pIcon + ' <b>' + order.payment + '</b></span>' : '') +
          (order.alamat ? '<span>📍 <b>' + order.alamat + '</b></span>' : '') +
          (order.catatan ? '<span>📝 <b>' + order.catatan + '</b></span>' : '') +
          '</div>' +
          '<div class="order-items-list">' +
          order.items.map(it => '<div class="order-item-row"><span>' + it.emoji + ' ' + it.name + ' x' + it.qty + '</span><span style="font-weight:600;color:#c2477b">' + fRp(it.price * it.qty) + '</span></div>').join('') +
          '</div>' +
          '<div class="order-total-row"><span>Total Pembayaran</span><span>' + fRp(order.total) + '</span></div>' +
          '</div>' +
          '<div class="order-actions">' +
          '<button class="btn-invoice" onclick="goTo(\'invoice\',{id:\'' + order.id + '\'})">🧾 Lihat Invoice</button>' +
          acts +
          '</div>'
        el.appendChild(card)
      })
    }

    /* ════ KONFIRMASI TERIMA ════ */
    function renderConfirm(id) {
      _confirmOrderId = id
      const order = getOrders().find(o => o.id === id)
      if (!order) { goTo('orders'); return }
      document.getElementById('confirmOrderId').textContent = 'No. Order: ' + order.id
      const sub = order.items.reduce((s, i) => s + i.price * i.qty, 0)
      const del = order.metode === 'Delivery' ? 5000 : 0
      let html = '<h4>Detail Pesanan</h4>'
      order.items.forEach(it => {
        html += '<div class="confirm-item-row"><span>' + it.emoji + ' ' + it.name + ' ×' + it.qty + '</span><span>' + fRp(it.price * it.qty) + '</span></div>'
      })
      if (del) html += '<div class="confirm-item-row"><span>🛵 Ongkir</span><span>' + fRp(del) + '</span></div>'
      html += '<div class="confirm-item-row"><span>Total Pembayaran</span><span>' + fRp(sub + del) + '</span></div>'
      document.getElementById('confirmItems').innerHTML = html
    }

    function konfirmasiTerima() {
      if (!_confirmOrderId) return
      const orders = getOrders()
      const i = orders.findIndex(o => o.id === _confirmOrderId)
      if (i > -1) orders[i].status = 'confirmed'
      saveOrders(orders)
      toast('🎉 Terima kasih! Pesanan dikonfirmasi.')
      goTo('orders')
    }

    function laporMasalah() {
      const order = getOrders().find(o => o.id === _confirmOrderId)
      if (!order) return
      const msg = 'Halo, saya ingin melaporkan masalah dengan pesanan No. ' + order.id + '.%0A%0ATerima kasih.'
      window.open('https://wa.me/6288213066069?text=' + msg, '_blank')
    }

    /* ════ INVOICE ════ */
    let _invOrder = null

    function renderInvoice(id) {
      const el = document.getElementById('invoiceContent')
      const order = getOrders().find(o => o.id === id)
      if (!order) {
        el.innerHTML = '<div class="empty-state"><span class="ei">🔍</span><h3>Invoice tidak ditemukan</h3></div>'
        _invOrder = null
        return
      }
      _invOrder = order
      const sub = order.items.reduce((s, i) => s + i.price * i.qty, 0)
      const del = order.metode === 'Delivery' ? 5000 : 0
      const tot = sub + del
      const sLbl = { proses: '⏳ Sedang Diproses', selesai: '✅ Selesai', batal: '❌ Dibatalkan', confirmed: '🎉 Diterima' }
      const mIcon = order.metode === 'Delivery' ? '🛵' : order.metode === 'Take-away' ? '🥡' : '🍽️'
      const pIcon = (order.payment || '').includes('Tunai') ? '💵' : (order.payment || '').includes('Transfer') ? '🏦' : (order.payment || '').includes('QRIS') ? '📱' : '🚪'

      el.innerHTML =
        '<div class="invoice">' +
        '<div class="inv-header">' +
        '<div class="inv-brand"><span class="inv-brand-icon">🍛</span><div><div class="inv-brand-name">Waroeng Makan Cak Lie</div><div class="inv-brand-sub">Masakan Rumahan Sejak 2005</div></div></div>' +
        '<div class="inv-title-row"><div class="inv-title">INVOICE</div><div><div class="inv-id">' + order.id + '</div><div class="inv-date">' + order.waktu + '</div></div></div>' +
        '</div>' +
        '<div class="inv-status-strip">' +
        '<span class="inv-status st-' + order.status + '">' + (sLbl[order.status] || order.status) + '</span>' +
        '<span class="inv-metode">' + mIcon + ' ' + order.metode + '</span>' +
        (order.payment ? '<span class="inv-metode">' + pIcon + ' ' + order.payment + '</span>' : '') +
        '</div>' +
        '<div class="inv-body">' +
        '<div class="inv-info-grid">' +
        '<div class="inv-info-block"><h4>Informasi Pemesan</h4><p>👤 ' + order.nama + '</p><p class="muted">📞 ' + order.hp + '</p>' + (order.alamat ? '<p class="muted">📍 ' + order.alamat + '</p>' : '') + '</div>' +
        '<div class="inv-info-block"><h4>Informasi Warung</h4><p>Waroeng Makan Cak Lie</p><p class="muted">📍 Jl. Kh. Hasyim No. 14B,<br>Kembangan Utara, Jakarta Barat</p><p class="muted">📞 0882-1306-6069</p></div>' +
        '</div>' +
        '<div class="inv-table-label">Detail Pesanan</div>' +
        '<table class="inv-table"><thead><tr><th>Nama Menu</th><th>Harga</th><th>Qty</th><th>Subtotal</th></tr></thead>' +
        '<tbody>' + order.items.map(it => '<tr><td><span class="item-name-cell"><span class="item-cell-emoji">' + it.emoji + '</span>' + it.name + '</span></td><td>' + fRp(it.price) + '</td><td>' + it.qty + '</td><td>' + fRp(it.price * it.qty) + '</td></tr>').join('') + '</tbody></table>' +
        '<div class="inv-totals">' +
        '<div class="inv-total-row"><span>Subtotal</span><span>' + fRp(sub) + '</span></div>' +
        (del ? '<div class="inv-total-row"><span>Ongkir (Delivery)</span><span>' + fRp(del) + '</span></div>' : '') +
        '<div class="inv-total-row grand"><span>Total Bayar</span><span>' + fRp(tot) + '</span></div>' +
        '</div>' +
        (order.catatan ? '<div class="inv-note"><p><strong>📝 Catatan:</strong> ' + order.catatan + '</p></div>' : '') +
        '</div>' +
        '<div class="inv-footer-block">' +
        '<p class="inv-thank">Terima kasih sudah memesan! 🙏</p>' +
        '<p>Simpan invoice ini sebagai bukti pesanan Anda.</p>' +
        '<div class="inv-contact"><span>📞 0882-1306-6069</span><span>🕐 Senin–Sabtu 06.00–21.00</span><span>📍 Kembangan Utara, Jakarta Barat</span></div>' +
        '</div></div>'
    }

    function shareInvoiceWa() {
      if (!_invOrder) return
      const o = _invOrder
      const sub = o.items.reduce((s, i) => s + i.price * i.qty, 0)
      const del = o.metode === 'Delivery' ? 5000 : 0
      const pIcon = (o.payment || '').includes('Tunai') ? '💵' : (o.payment || '').includes('Transfer') ? '🏦' : (o.payment || '').includes('QRIS') ? '📱' : '🚪'
      let msg = '🧾 *INVOICE - Waroeng Makan Cak Lie*\n━━━━━━━━━━━━━━━━━\n'
      msg += '📋 No. Order: *' + o.id + '*\n👤 Nama: ' + o.nama + '\n🚚 Metode: ' + o.metode + '\n'
      if (o.payment) msg += pIcon + ' Pembayaran: ' + o.payment + '\n'
      msg += '⏰ Waktu: ' + o.waktu + '\n━━━━━━━━━━━━━━━━━\n'
      o.items.forEach(i => { msg += i.emoji + ' ' + i.name + ' x' + i.qty + ' = ' + fRp(i.price * i.qty) + '\n' })
      msg += '━━━━━━━━━━━━━━━━━\n'
      if (del) msg += 'Ongkir: ' + fRp(del) + '\n'
      msg += '💰 *TOTAL: ' + fRp(sub + del) + '*'
      window.open('https://wa.me/6288213066069?text=' + encodeURIComponent(msg), '_blank')
    }

    /* ════ BURGER MENU — FIX ════ */
    function closeDrawer() {
      document.getElementById('mobileDrawer').classList.remove('open')
      document.getElementById('mobileOverlay').classList.remove('show')
      document.getElementById('burgerBtn').classList.remove('open')
      document.body.style.overflow = ''
    }

    function initBurger() {
      const burger = document.getElementById('burgerBtn')
      const drawer = document.getElementById('mobileDrawer')
      const overlay = document.getElementById('mobileOverlay')
      const closeBtn = document.getElementById('drawerClose')

      burger.addEventListener('click', () => {
        const isOpen = drawer.classList.contains('open')
        if (isOpen) {
          closeDrawer()
        } else {
          drawer.classList.add('open')
          overlay.classList.add('show')
          burger.classList.add('open')
          document.body.style.overflow = 'hidden'
        }
      })

      overlay.addEventListener('click', closeDrawer)
      closeBtn.addEventListener('click', closeDrawer)
    }

    /* ════ BOOT ════ */
    document.addEventListener('DOMContentLoaded', () => {
      renderMenuAll()
      initSearch()
      initStickyNav()
      initMethodToggle()
      initBurger()
      updateBadge()

      // Tangani redirect dari payment.html (?page=orders&new=ORD-xxx)
      const params = new URLSearchParams(window.location.search)
      const pg = params.get('page')
      const nid = params.get('new')
      if (pg === 'orders') {
        history.replaceState({}, '', window.location.pathname)
        localStorage.removeItem('cart')
        updateBadge()
        goTo('orders', nid ? { newId: nid } : {})
      }
    })
  </script>
</body>

</html>